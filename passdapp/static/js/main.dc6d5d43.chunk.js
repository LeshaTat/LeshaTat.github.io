(this.webpackJsonppassdapp=this.webpackJsonppassdapp||[]).push([[0],{11:function(e){e.exports=JSON.parse('{"appId":23776094,"prepare":"AyAD6AfelqsLACYBB3ByZXBhcmUxASIOMRgjEhAxGSQSEDYaACgSEA==","confirm":"AyAD6AfelqsLACYBB2NvbmZpcm0xASIOMRgjEhAxGSQSEDYaACgSEA==","confirmTxn":"AyAD6AfelqsLACYBB2NvbmZpcm0xIDIDEkQxASIORC0XOAAxABJELRc4GCMSRC0XOBkkEkQtFzkaACgSQw==","cancel":"AyAD6AfelqsLACYBBmNhbmNlbDEBIg4xGCMSEDEZJBIQNhoAKBIQ","pbkdf2Salt":"eimvZR+3M9KwUaQcTE1C7aBWU0YLMGz5JErzuOIyJ6c="}')},150:function(e,t,n){e.exports={funcPanel:"funcPanel_funcPanel__3QdLC"}},159:function(e,t,n){},188:function(e,t){},190:function(e,t){},200:function(e,t){},202:function(e,t){},229:function(e,t){},231:function(e,t){},232:function(e,t){},237:function(e,t){},239:function(e,t){},245:function(e,t){},247:function(e,t){},266:function(e,t){},278:function(e,t){},281:function(e,t){},288:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(25),c=n.n(a),s=(n(159),n(85)),o=n.n(s),i=n(3),u=n.n(i),l=n(7),p=n(14),d=n(46),f=function(){return Object(d.b)()},b=d.c,x=n(19),j=n(20),h=n(9),v=n.n(h),m=Object(j.b)({name:"algorandClient",initialState:{purestake:!0,token:"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",host:"http://localhost:4001",hostIndexer:"http://localhost:8980"},reducers:{setTokenHostIndexer:function(e,t){e.token=t.payload.token,e.host=t.payload.host,e.hostIndexer=t.payload.hostIndexer},setPurestake:function(e,t){e.purestake=t.payload}}}),O=m.actions,g=O.setTokenHostIndexer,k=O.setPurestake,w=function(e){return e.algorandClient.host},y=function(e){return e.algorandClient.hostIndexer},S=function(e){return e.algorandClient.token},C=function(e){return e.algorandClient.purestake},A=Object(x.a)(w,S,C,(function(e,t,n){var r=new URL(e),a=r.protocol+"//"+r.hostname+r.pathname;return new v.a.Algodv2(n?{"X-API-Key":t}:t,a,parseInt(r.port)||"")})),T=Object(x.a)(y,S,C,(function(e,t,n){var r=new URL(e),a=r.protocol+"//"+r.hostname+r.pathname;return new v.a.Indexer(n?{"X-API-Key":t}:t,a,parseInt(r.port)||"")})),I=m.reducer,P=n(294),B=n(290),R=n(1),D="https://testnet-algorand.api.purestake.io/ps2",N="https://testnet-algorand.api.purestake.io/idx2";function L(){var e=b(w),t=b(y),n=b(S),a=b(A),c=b(C),s=f(),o=Object(r.useState)(e),i=Object(p.a)(o,2),d=i[0],x=i[1],j=Object(r.useState)(t),h=Object(p.a)(j,2),v=h[0],m=h[1],O=Object(r.useState)(n),T=Object(p.a)(O,2),I=T[0],L=T[1];return Object(R.jsxs)(P.a,{children:[Object(R.jsx)(P.a.Group,{controlId:"formPurestake",children:Object(R.jsxs)(P.a.Check,{type:"checkbox",checked:c,label:"Purestake",children:[Object(R.jsx)(P.a.Check.Input,{type:"checkbox",checked:c,onChange:function(e){return s(k(e.currentTarget.checked))}}),Object(R.jsx)(P.a.Check.Label,{children:Object(R.jsx)("a",{target:"_blank",href:"https://developer.purestake.io/login",children:"Purestake"})})]})}),Object(R.jsxs)(P.a.Group,{controlId:"formToken",children:[Object(R.jsx)(P.a.Label,{children:"Token"}),Object(R.jsx)(P.a.Control,{type:"text",placeholder:"Enter token",value:I,onChange:function(e){return L(e.currentTarget.value)}})]}),Object(R.jsxs)(P.a.Group,{controlId:"formHost",children:[Object(R.jsx)(P.a.Label,{children:"Algod"}),Object(R.jsx)(P.a.Control,{type:"text",placeholder:"Enter server host",disabled:c,value:c?D:d,onChange:function(e){return x(e.currentTarget.value)}})]}),Object(R.jsxs)(P.a.Group,{controlId:"formHostIndexer",children:[Object(R.jsx)(P.a.Label,{children:"Indexer"}),Object(R.jsx)(P.a.Control,{type:"text",placeholder:"Enter server host",disabled:c,value:c?N:v,onChange:function(e){return m(e.currentTarget.value)}})]}),Object(R.jsx)(B.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault(),s(g({token:I,host:c?D:d,hostIndexer:c?N:v}))},children:"Save"})," ",Object(R.jsx)(B.a,{variant:"primary",type:"submit",onClick:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.status().do();case 3:n=e.sent,alert(JSON.stringify(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Test"})]})}var _=n(11),E=n(87),U=String.fromCharCode,q=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(U(e[n]));return btoa(t.join(""))},K=function(e){return Uint8Array.from(atob(e),F)},F=function(e){return e.charCodeAt(0)};function H(e,t){for(var n=Object(E.createHash)().update(e).digest(),r=0;r<t-1;++r)n=Object(E.createHash)().update(n).digest();return n}function G(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Q(e,t,n){return"not-created"!==n.status&&"not-opted-in"!==n.status&&"wait-setup"!==n.status&&q(H(t,n.counter))==n.secret}function J(e,t,n){if(!e)return{status:"not-created"};var r=e["apps-local-state"];if(!r)return{status:"not-opted-in"};var a=r.find((function(e){return e.id==n}));if(!a)return{status:"not-opted-in"};console.log(a);var c=a["key-value"],s={};for(var o in c){var i=c[o];console.log(i,atob(i.key)),s[atob(i.key)]=i.value}return console.log(s),s.secret.bytes?s.mark.bytes?{status:"wait-confirm",mark:s.mark.bytes,secret:s.secret.bytes,counter:s.counter.uint}:{status:"wait-prepare",counter:s.counter.uint,secret:s.secret.bytes}:{status:"wait-setup"}}function M(e){var t=v.a.makeLogicSig(K(_.prepare)),n=v.a.makeLogicSig(K(_.confirm)),r=v.a.makeLogicSig(K(_.confirmTxn)),a=v.a.makeLogicSig(K(_.cancel));return t.sig=t.signProgram(e.sk),n.sig=n.signProgram(e.sk),r.sig=r.signProgram(e.sk),a.sig=a.signProgram(e.sk),{prepareSig:q(t.toByte()),confirmSig:q(n.toByte()),confirmTxnSig:q(r.toByte()),cancelSig:q(a.toByte())}}var Y=1e6;function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Applying a password hashing function (PBKDF2)... "),e.t0=Uint8Array,e.t1=window.crypto.subtle,e.t2={name:"PBKDF2",hash:"SHA-256",salt:K(_.pbkdf2Salt||"hpzMoniyx4nX2+nBwTCF+FFJW1OVanyMxO0bRj/a5Uw="),iterations:Y},e.next=6,window.crypto.subtle.importKey("raw",Uint8Array.from(t,(function(e){return e.charCodeAt(0)})),"PBKDF2",!1,["deriveBits"]);case 6:return e.t3=e.sent,e.next=9,e.t1.deriveBits.call(e.t1,e.t2,e.t3,256);case 9:return e.t4=e.sent,n=new e.t0(e.t4),console.log("Done"),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=Object(j.b)({name:"status",initialState:{amount:"",dappState:null,processing:!1},reducers:{setFullDAppState:function(e,t){var n=t.payload,r=n.amount,a=n.dappState;e.amount=r.toString(),e.dappState=a},setUnavailableStatus:function(e,t){e.amount="",e.dappState=null},setAmount:function(e,t){e.amount=t.payload.toString()},setProcessing:function(e,t){e.processing=t.payload},setAmountUnknown:function(e,t){e.amount=""}}}),z=W.actions,V=z.setAmount,$=z.setAmountUnknown,ee=z.setFullDAppState,te=(z.setUnavailableStatus,z.setProcessing),ne=function(e){return e.status.amount},re=function(e){return e.status.processing},ae=function(e){return e.status.dappState},ce=function(){return function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qe(n()),a=A(n()),!r){e.next=8;break}return e.next=5,a.accountInformation(r).do();case 5:c=e.sent,t(ee({amount:c.amount,dappState:J(c,0,_.appId)})),t(V(c.amount));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},se=function(e,t){return function(){var n=Object(l.a)(u.a.mark((function n(r,a){var c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(te(!0)),n.prev=1,n.next=4,r(e);case 4:if(c=n.sent,t&&t.noStatus){n.next=8;break}return n.next=8,r(ce());case 8:return n.abrupt("return",c);case 11:throw n.prev=11,n.t0=n.catch(1),n.t0;case 14:return n.prev=14,r(te(!1)),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})));return function(e,t){return n.apply(this,arguments)}}()},oe=function(){return function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(te(!0)),e.prev=1,e.next=4,t(ce());case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),e.t0;case 9:return e.prev=9,t(te(!1)),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t,n){return e.apply(this,arguments)}}()},ie=W.reducer;function ue(e,t,n){return le.apply(this,arguments)}function le(){return(le=Object(l.a)(u.a.mark((function e(t,n,r){var a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.status().do();case 2:if("undefined"!==typeof(a=e.sent)){e.next=5;break}throw new Error("Unable to get node status");case 5:c=a["last-round"],s=c;case 7:if(!(s<c+r)){e.next=24;break}return e.next=10,t.pendingTransactionInformation(n).do();case 10:if(void 0===(o=e.sent)){e.next=18;break}if(!(null!==o["confirmed-round"]&&o["confirmed-round"]>0)){e.next=16;break}return e.next=15,t.statusAfterBlock(s).do();case 15:return e.abrupt("return",o);case 16:if(!(null!=o["pool-error"]&&o["pool-error"].length>0)){e.next=18;break}throw new Error("Transaction Rejected pool error".concat(o["pool-error"]));case 18:return console.log("Waiting on round "+s),e.next=21,t.statusAfterBlock(s).do();case 21:s+=1,e.next=7;break;case 24:throw new Error("Transaction not confirmed after ".concat(r," rounds!"));case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t,n){return de.apply(this,arguments)}function de(){return(de=Object(l.a)(u.a.mark((function e(t,n,r){var a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransactionParams().do();case 2:return a=e.sent,c=v.a.makeApplicationOptInTxn(n.addr,a,r),e.next=6,t.sendRawTransaction(c.signTxn(n.sk)).do();case 6:return s=e.sent,o=s.txId,e.next=10,ue(t,o,1e3);case 10:console.log("opted in");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t,n){return be.apply(this,arguments)}function be(){return(be=Object(l.a)(u.a.mark((function e(t,n,r){var a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransactionParams().do();case 2:return a=e.sent,c=v.a.makeApplicationClearStateTxn(n.addr,a,r),e.next=6,t.sendRawTransaction(c.signTxn(n.sk)).do();case 6:return s=e.sent,o=s.txId,e.next=10,ue(t,o,1e3);case 10:console.log("cleared");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t,n,r){return je.apply(this,arguments)}function je(){return(je=Object(l.a)(u.a.mark((function e(t,n,r,a){var c,s,o,i,l,p,d,f,b,x,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransactionParams().do();case 2:return c=e.sent,s=M(n),o=s.prepareSig,i=s.confirmSig,l=s.confirmTxnSig,p=s.cancelSig,d=function(e){return K(e)},f=H(a,Ae),b=v.a.makeApplicationNoOpTxn(n.addr,c,r,[K(btoa("setup")),f,v.a.encodeUint64(Ae)],void 0,void 0,void 0,G(f,v.a.encodeObj({address:n.addr,prepare:d(o),confirm:d(i),confirmTxn:d(l),cancel:d(p)}))),e.next=9,t.sendRawTransaction(b.signTxn(n.sk)).do();case 9:return x=e.sent,j=x.txId,e.next=13,ue(t,j,1e3);case 13:return console.log("setup",a),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t,n){return ve.apply(this,arguments)}function ve(){return(ve=Object(l.a)(u.a.mark((function e(t,n,r){var a,c,s,o,i,l,p,d,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=H(r,Ae),e.next=3,t.searchForTransactions().applicationID(n).txType("appl").notePrefix(a).do();case 3:if(c=e.sent,(s=c&&c.transactions)&&0!=s.length){e.next=7;break}throw"Password not found";case 7:i=s.length-1;case 8:if(!(i>=0)){e.next=28;break}if((l=s[i]).note){e.next=12;break}return e.abrupt("continue",25);case 12:o=K(l.note),p=!0,d=0;case 15:if(!(d<a.length)){e.next=22;break}if(o[d]==a[d]){e.next=19;break}return p=!1,e.abrupt("break",22);case 19:++d,e.next=15;break;case 22:if(!p){e.next=24;break}return e.abrupt("break",28);case 24:o=null;case 25:--i,e.next=8;break;case 28:if(o){e.next=30;break}throw"Password not found";case 30:return f=v.a.decodeObj(o.slice(a.length)),e.abrupt("return",{address:f.address,sigs:{prepareSig:q(f.prepare),confirmSig:q(f.confirm),confirmTxnSig:q(f.confirmTxn),cancelSig:q(f.cancel)}});case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t,n,r,a,c){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(l.a)(u.a.mark((function e(t,n,r,a,c,s){var o,i,l,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransactionParams().do();case 2:return o=e.sent,i=v.a.makeApplicationNoOpTxn(n,o,a,[K(btoa("prepare")),c,K(s)]),e.next=6,t.sendRawTransaction(v.a.signLogicSigTransactionObject(i,v.a.logicSigFromByte(K(r.prepareSig))).blob).do();case 6:return l=e.sent,p=l.txId,e.next=10,ue(t,p,1e3);case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t,n,r){return ke.apply(this,arguments)}function ke(){return(ke=Object(l.a)(u.a.mark((function e(t,n,r,a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransactionParams().do();case 2:return c=e.sent,e.abrupt("return",v.a.makeApplicationNoOpTxn(n,c,r,[K(btoa("confirm")),a]));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e,t,n,r,a){return ye.apply(this,arguments)}function ye(){return(ye=Object(l.a)(u.a.mark((function e(t,n,r,a,c){var s,o,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransactionParams().do();case 2:return s=e.sent,o=v.a.makeApplicationNoOpTxn(n,s,a,[K(btoa("cancel")),c]),e.next=6,t.sendRawTransaction(v.a.signLogicSigTransactionObject(o,v.a.logicSigFromByte(K(r.cancelSig))).blob).do();case 6:return i=e.sent,l=i.txId,e.next=10,ue(t,l,1e3);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e,t,n,r){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(l.a)(u.a.mark((function e(t,n,r,a){var c,s,o,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ctxn: ",r.txID()),c=v.a.signLogicSigTransactionObject(r,v.a.logicSigFromByte(K(n.confirmSig))).blob,console.log("txn: ",a.txID()),(s=v.a.logicSigFromByte(K(n.confirmTxnSig))).args=[v.a.encodeUint64(0)],o=v.a.signLogicSigTransactionObject(a,s).blob,e.next=8,t.sendRawTransaction([c,o]).do();case 8:return i=e.sent,l=i.txId,e.next=12,ue(t,l,1e3);case 12:return e.abrupt("return");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=1e3,Te={appId:_.appId,sigs:null},Ie=Object(j.b)({name:"contract",initialState:Te,reducers:{setSigs:function(e,t){e.sigs=t.payload}}}),Pe=Ie.actions.setSigs,Be=function(e){return e.contract.sigs},Re=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n,r){var a,c,s,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Ke(r()),c=A(r()),s=ae(r()),a){t.next=5;break}throw"Account is not loaded";case 5:if(s){t.next=7;break}throw"App state is not loaded";case 7:if("not-created"!=s.status){t.next=9;break}throw"App is not created";case 9:if("not-opted-in"!=s.status){t.next=11;break}throw"App is not opted in";case 11:return t.next=13,X(e);case 13:return o=t.sent,t.next=16,xe(c,a,_.appId,o);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},De=Ie.reducer,Ne=Object(j.b)({name:"account",initialState:{mnemonic:"",address:""},reducers:{setAddress:function(e,t){e.address!=t.payload&&(e.mnemonic=""),e.address=t.payload},setMnemonic:function(e,t){e.mnemonic=t.payload,e.address=v.a.mnemonicToSecretKey(e.mnemonic).addr}}}),Le=Ne.actions,_e=Le.setMnemonic,Ee=Le.setAddress,Ue=function(e){return e.account.mnemonic},qe=function(e){return e.account.address},Ke=Object(x.a)(Ue,(function(e){return e?v.a.mnemonicToSecretKey(e):null})),Fe=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n,r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=qe(r()),e.mnemonic?n(_e(e.mnemonic)):e.address&&n(Ee(e.address)),qe(r())!=a){t.next=5;break}return t.abrupt("return");case 5:n(Pe(null)),n($());case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},He=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n,r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.mnemonic,n(Fe({mnemonic:a})),n(oe());case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Ge=Ne.reducer;function Qe(){var e=b(Ue),t=f(),n=Object(r.useState)(e),a=Object(p.a)(n,2),c=a[0],s=a[1];return Object(R.jsx)("div",{children:Object(R.jsxs)(P.a,{children:[Object(R.jsxs)(P.a.Group,{controlId:"mnemonic",children:[Object(R.jsx)(P.a.Label,{children:"Mnemonic"}),Object(R.jsx)(P.a.Control,{type:"text",placeholder:"Enter 25-words mnemonic phrase",value:c,onChange:function(e){return s(e.currentTarget.value)}})]}),Object(R.jsx)(B.a,{variant:"primary",type:"submit",onClick:function(e){e.preventDefault();var n=v.a.secretKeyToMnemonic(v.a.generateAccount().sk);s(n),t(He({mnemonic:n}))},children:"New"})," ",Object(R.jsx)(B.a,{variant:"primary",type:"submit",disabled:c==e||25!=c.split(" ").length,onClick:function(e){e.preventDefault(),t(_e(c)),t(He({mnemonic:c}))},children:"Save"})," "]})})}var Je=n(88),Me=n.n(Je),Ye=n(296),Xe=n(291),Ze=n(292),We=n(149);function ze(){var e=b(re),t=b(ne),n=b(qe),r=b(w),a=b(ae),c=f();return Object(R.jsx)(Ye.a,{children:Object(R.jsxs)(Ye.a.Body,{children:[Object(R.jsx)("div",{className:Me.a.hostPlace,children:r}),Object(R.jsx)(Xe.a,{children:Object(R.jsxs)(Ze.a,{as:"dl",children:[Object(R.jsx)(We.a,{as:"dt",children:"Address: "}),Object(R.jsx)(We.a,{as:"dd",children:n||"unknown"}),Object(R.jsx)(We.a,{as:"dt",children:"Amount: "}),Object(R.jsx)(We.a,{as:"dd",children:""==t?"unknown":t})]})}),Object(R.jsx)("pre",{className:Me.a.statePlace,children:e?"loading...":a?JSON.stringify(a,null,4):""}),Object(R.jsx)(B.a,{variant:"primary",type:"submit",disabled:!n,onClick:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c(oe());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Update"})]})})}var Ve=n(89),$e=n.n(Ve),et=n(150),tt=n.n(et);function nt(e){return Object(R.jsx)("div",{className:tt.a.funcPanel,children:e.children})}function rt(e){var t=Object(r.useState)(""),n=Object(p.a)(t,2),a=n[0],c=n[1];return Object(R.jsxs)("div",{className:$e.a.setupButton,children:[Object(R.jsx)(B.a,{disabled:!a,onClick:function(){e.onSetup(a)},children:"Setup"}),Object(R.jsxs)("span",{className:$e.a.generatePasswd,children:[Object(R.jsx)(P.a.Control,{value:a,onChange:function(e){return c(e.target.value)},type:"text",placeholder:"Enter password"}),Object(R.jsx)(B.a,{onClick:function(){return c(function(){var e=v.a.secretKeyToMnemonic(v.a.generateAccount().sk);return e.split(" ").slice(0,4).join(" ")}())},children:"Generate"})]})]})}function at(e){var t,n;"string"==typeof e?alert(e):alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.body)||void 0===n?void 0:n.message)||"Failed")}function ct(){var e=f(),t=b(A),n=b(Ke),r=b(C);return Object(R.jsxs)(P.a,{children:[Object(R.jsx)(nt,{children:Object(R.jsx)(B.a,{disabled:!n||!t,onClick:Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(se(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ke(n()),a=A(n()),r){e.next=4;break}throw"Account is not loaded";case 4:return e.next=6,pe(a,r,_.appId);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),at(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),children:"Opt in"})}),Object(R.jsx)(nt,{children:Object(R.jsx)(rt,{onSetup:function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(se(Re(n)));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),at(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()})}),Object(R.jsx)(nt,{children:Object(R.jsx)(B.a,{disabled:!n||!t,onClick:Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(se(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ke(n()),a=A(n()),r){e.next=4;break}throw"Account is not loaded";case 4:return e.next=6,fe(a,r,_.appId);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),at(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),children:"Clear"})}),Object(R.jsx)(nt,{children:r?Object(R.jsxs)("div",{children:["You can get some algos to a newly created account on the following pages",Object(R.jsxs)("ul",{children:[Object(R.jsx)("li",{children:Object(R.jsx)("a",{target:"_blank",href:"https://bank.testnet.algorand.network",children:"https://bank.testnet.algorand.network"})}),Object(R.jsx)("li",{children:Object(R.jsx)("a",{target:"_blank",href:"https://testnet.algoexplorer.io/dispenser",children:"https://testnet.algoexplorer.io/dispenser"})})]})]}):Object(R.jsxs)("div",{children:["You can get some algos to a newly created account using Sandbox client. See the example in the article ",Object(R.jsx)("a",{target:"_blank",href:"https://developer.algorand.org/articles/introducing-sandbox-20/",children:"Introducing Sandbox 2.0"}),"."]})})]})}var st=n(153),ot=Object(j.b)({name:"auth",initialState:{passwdRaw:"",passwdHashed:null,currentRequest:null},reducers:{setPasswd:function(e,t){e.passwdRaw!=t.payload&&(e.passwdHashed=null),e.passwdRaw=t.payload},setCurrentRequest:function(e,t){e.currentRequest=t.payload}}}),it=ot.actions,ut=it.setPasswd,lt=it.setCurrentRequest,pt=function(e){return e.auth.currentRequest},dt=function(e){return e.auth.passwdRaw},ft="",bt=null,xt=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bt&&t.auth.passwdRaw==ft){e.next=5;break}return e.next=3,X(t.auth.passwdRaw);case 3:bt=e.sent,ft=t.auth.passwdRaw;case 5:return e.abrupt("return",bt);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jt=Object(x.a)(ae,Be,(function(e,t){return t&&e?"not-created"===e.status?{}:"not-opted-in"===e.status||"wait-setup"===e.status?{find:!0}:"wait-prepare"===e.status?{find:!0,prepare:!0}:"wait-confirm"===e.status?{find:!0,confirm:!0,cancel:!0}:{find:!0,prepare:!0,confirm:!0,cancel:!0}:{find:!0}})),ht=(Object(x.a)(ae,xt,function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.t0=Q,e.t1=_.appId,e.next=6,n;case 6:return e.t2=e.sent,e.t3=t,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),function(e,t){return function(){var n=Object(l.a)(u.a.mark((function n(r,a){var c,s,o,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=qe(a()),s=A(a()),t){n.next=4;break}throw"Payment amount is not set";case 4:if(e){n.next=6;break}throw"Receiver address is not set";case 6:return n.next=8,s.getTransactionParams().do();case 8:return o=n.sent,i=v.a.makePaymentTxnWithSuggestedParamsFromObject({from:c,to:e,amount:t,suggestedParams:o}),n.abrupt("return",i);case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}),vt=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n,r){var a,c,s,o,i,l,d,f,b,x,j,h;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=qe(r()),c=A(r()),s=Be(r()),o=ae(r()),t.next=6,xt(r());case 6:if(i=t.sent,s){t.next=9;break}throw"Credentials were not set";case 9:if(o&&"wait-prepare"==o.status){t.next=11;break}throw"Incorrect contract local state";case 11:return n(lt("prepare")),t.prev=12,l=o.counter-o.counter%3,d=H(i,l-2),t.next=18,ge(c,a,_.appId,d);case 18:return f=t.sent,b=v.a.assignGroupID([f,v.a.decodeUnsignedTransaction(v.a.encodeUnsignedTransaction(e))]),x=Object(p.a)(b,2),j=x[0],h=x[1],t.next=22,me(c,a,s,_.appId,H(d,2),q(j.rawTxID()));case 22:return t.abrupt("return",{groupCTxn:j,groupTxn:h});case 23:return t.prev=23,n(lt(null)),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[12,,23,26]])})));return function(e,n){return t.apply(this,arguments)}}()},mt=function(e,t){return function(){var n=Object(l.a)(u.a.mark((function n(r,a){var c,s,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=A(a()),s=Be(a()),o=ae(a()),s){n.next=5;break}throw"Signatures not loaded";case 5:if(o&&"wait-confirm"===o.status){n.next=7;break}throw"Not waiting for confirmation";case 7:if(q(e.rawTxID())==o.mark){n.next=9;break}throw"State check failed: it is not safe to proceed";case 9:return r(lt("confirm")),n.prev=10,n.next=13,Se(c,s,e,t);case 13:return n.prev=13,r(lt(null)),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[10,,13,16]])})));return function(e,t){return n.apply(this,arguments)}}()},Ot=function(){return function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=T(n()),e.next=3,xt(n());case 3:return a=e.sent,t(lt("find")),e.prev=5,e.next=8,he(r,_.appId,a);case 8:c=e.sent,s=c.address,o=c.sigs,t(Ee(s)),t(Pe(o));case 13:return e.prev=13,t(lt(null)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[5,,13,16]])})));return function(t,n){return e.apply(this,arguments)}}()},gt=function(e,t){return function(){var n=Object(l.a)(u.a.mark((function n(r,a){var c,s,o,i,l,p,d;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=Be(a()),n.next=3,xt(a());case 3:if(s=n.sent,(o=ae(a()))&&c&&Q(_.appId,s,o)){n.next=8;break}return n.next=8,r(se(Ot()));case 8:return i=qe(a()),n.t0=r,n.t1=se,n.t2=vt,n.next=14,e(i);case 14:return n.t3=n.sent,n.t4=(0,n.t2)(n.t3),n.t5=(0,n.t1)(n.t4),n.next=19,(0,n.t0)(n.t5);case 19:return l=n.sent,p=l.groupCTxn,d=l.groupTxn,null===t||void 0===t||t(p,d),n.next=25,r(se(mt(p,d)));case 25:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},kt=ot.reducer;function wt(e){var t,n;"string"==typeof e?alert(e):alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.body)||void 0===n?void 0:n.message)||"Request failed")}function yt(e){var t=e.title,n=e.type,r=e.availableRequests,a=e.currentRequest,c=e.onClick;return Object(R.jsx)(B.a,{disabled:!r[n]||!!a,onClick:c,variant:n==a?"outline-primary":"primary",children:t})}function St(){var e=f(),t=b(qe),n=Object(st.a)({},b(jt)),a=b(pt),c=b(dt),s=Object(r.useState)(c),o=Object(p.a)(s,2),i=o[0],d=o[1],x=Object(r.useState)("QC7XT7QU7X6IHNRJZBR67RBMKCAPH67PCSX4LYH4QKVSQ7DQZ32PG5HSVQ"),j=Object(p.a)(x,2),h=j[0],v=j[1],m=Object(r.useState)(11e4),O=Object(p.a)(m,2),g=O[0],k=O[1],w=Object(r.useState)(null),y=Object(p.a)(w,2),S=y[0],C=y[1],T=Object(r.useState)(null),I=Object(p.a)(T,2),D=I[0],N=I[1],L=Object(r.useState)(null),E=Object(p.a)(L,2),U=E[0],K=E[1];D&&U||delete n.confirm;var F=Object(r.useCallback)(Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i){t.next=2;break}return t.abrupt("return");case 2:return i!=c&&e(ut(i)),t.prev=3,t.next=6,e(se(Ot()));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),wt(t.t0);case 11:case"end":return t.stop()}}),t,null,[[3,8]])}))),[S,i]),G=Object(r.useCallback)(Object(l.a)(u.a.mark((function t(){var n,r,a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,i!=c&&e(ut(i)),t.next=6,e(ht(h,g));case 6:return n=t.sent,C(n),K(null),N(null),t.next=12,e(se(vt(n)));case 12:r=t.sent,a=r.groupCTxn,s=r.groupTxn,K(a),N(s),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),wt(t.t0);case 22:case"end":return t.stop()}}),t,null,[[2,19]])}))),[i,t,h,g]),Q=Object(r.useCallback)(Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i!=c&&e(ut(i)),U&&D){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,e(se(mt(U,D)));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),wt(t.t0);case 11:case"end":return t.stop()}}),t,null,[[3,8]])}))),[U,D,i]),J=Object(r.useCallback)(Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i!=c&&e(ut(i)),i){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,e(se(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe(n()),a=A(n()),c=Be(n()),s=ae(n()),e.next=6,xt(n());case 6:if(o=e.sent,c){e.next=9;break}throw"Signatures not loaded";case 9:if(s&&"wait-confirm"===s.status){e.next=11;break}throw"Not waiting for confirmation";case 11:return t(lt("cancel")),e.prev=12,e.next=15,we(a,r,c,_.appId,H(o,s.counter-1));case 15:return e.prev=15,t(lt(null)),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[12,,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),wt(t.t0);case 11:case"end":return t.stop()}}),t,null,[[3,8]])}))),[c]),M=Object(r.useCallback)(Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i){t.next=3;break}throw"Passwd is not set";case 3:return i!=c&&e(ut(i)),t.next=6,e(gt(Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(ht(h,g));case 2:return n=t.sent,C(n),K(null),N(null),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)}))),(function(e,t){K(e),N(t)})));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),wt(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),[S,i,g,h]);return Object(R.jsxs)(Xe.a,{children:[Object(R.jsx)(Ze.a,{children:Object(R.jsx)(We.a,{children:Object(R.jsx)(P.a.Control,{value:i,onChange:function(e){return d(e.target.value)},type:"text",placeholder:"Enter password"})})}),Object(R.jsxs)(Ze.a,{children:[Object(R.jsx)(We.a,{children:Object(R.jsx)(nt,{children:Object(R.jsxs)(Ye.a,{children:[Object(R.jsx)(Ye.a.Header,{children:Object(R.jsx)(B.a,{onClick:M,children:"Sign and Send Payment Transaction"})}),Object(R.jsx)(Ye.a.Body,{children:Object(R.jsxs)(P.a,{children:[Object(R.jsxs)(P.a.Group,{controlId:"formBasicAddress",children:[Object(R.jsx)(P.a.Label,{children:"Recepient address"}),Object(R.jsx)(P.a.Control,{type:"text",placeholder:"XYZ...",value:h,onChange:function(e){return v(e.target.value)}})]}),Object(R.jsxs)(P.a.Group,{controlId:"formBasicAmount",children:[Object(R.jsx)(P.a.Label,{children:"Amount"}),Object(R.jsx)(P.a.Control,{type:"number",placeholder:"Amount",value:(null===g||void 0===g?void 0:g.toString())||0,onChange:function(e){return k(parseInt(e.target.value)||0)}})]})]})})]})})}),Object(R.jsx)(We.a,{xs:"auto",style:{display:"flex"},children:Object(R.jsxs)("div",{style:{display:"flex",justifyContent:"center",flex:1,flexDirection:"column"},children:[Object(R.jsxs)(nt,{children:["1. ",Object(R.jsx)(yt,{type:"find",title:"Find credentials",onClick:F,availableRequests:n,currentRequest:a})]}),Object(R.jsxs)(nt,{children:["2. ",Object(R.jsx)(yt,{type:"prepare",title:"Prepare",onClick:G,availableRequests:n,currentRequest:a})]}),Object(R.jsxs)(nt,{children:["3. ",Object(R.jsx)(yt,{type:"confirm",title:"Confirm",onClick:Q,availableRequests:n,currentRequest:a})]}),Object(R.jsxs)(nt,{children:["3",Object(R.jsx)("span",{style:{position:"absolute"},children:"*"}),". ",Object(R.jsx)(yt,{type:"cancel",title:"Cancel",onClick:J,availableRequests:n,currentRequest:a})]})]})})]}),Object(R.jsx)(Ze.a,{children:Object(R.jsx)(We.a,{children:Object(R.jsxs)(Ye.a,{children:[Object(R.jsx)(Ye.a.Header,{children:"Transaction Content"}),Object(R.jsxs)(Ye.a.Body,{children:[Object(R.jsx)("div",{children:null===S||void 0===S?void 0:S.txID()}),Object(R.jsx)("div",{children:U?"Raw TxID in group: "+q(U.rawTxID()):""}),Object(R.jsx)("pre",{children:JSON.stringify(JSON.parse((null===S||void 0===S?void 0:S.toString())||"{}"),null,2)})]})]})})})]})}var Ct=n(295),At=n(293),Tt=n(5),It=n.n(Tt);function Pt(e){return Object(R.jsx)("div",{className:It()(o.a.tabBase,"border-bottom","border-left","border-right"),children:e.children})}var Bt=function(){return Object(R.jsx)("div",{className:o.a.main,children:Object(R.jsxs)(Xe.a,{children:[Object(R.jsx)(Ze.a,{children:Object(R.jsx)(We.a,{children:Object(R.jsx)("h3",{children:"Algorand PassDApp"})})}),Object(R.jsxs)(Ze.a,{children:[Object(R.jsx)(We.a,{sm:3,children:Object(R.jsx)(ze,{})}),Object(R.jsx)(We.a,{sm:9,children:Object(R.jsxs)(Ct.a,{defaultActiveKey:"algoclient",children:[Object(R.jsx)(At.a,{eventKey:"algoclient",title:"Node Provider",children:Object(R.jsx)(Pt,{children:Object(R.jsx)(L,{})})}),Object(R.jsxs)(At.a,{eventKey:"account",title:"Setup",children:[Object(R.jsx)(Pt,{children:Object(R.jsx)(Qe,{})}),Object(R.jsx)(Pt,{children:Object(R.jsx)(ct,{})})]}),Object(R.jsx)(At.a,{eventKey:"auth",title:"Transaction Authentication",children:Object(R.jsx)(Pt,{children:Object(R.jsx)(St,{})})})]})})]})]})})},Rt=Object(j.a)({reducer:{status:ie,account:Ge,contract:De,algorandClient:I,auth:kt}});n(287);c.a.render(Object(R.jsx)(d.a,{store:Rt,children:Object(R.jsx)(Bt,{})}),document.getElementById("root"))},85:function(e,t,n){e.exports={main:"App_main__3ZkGI",tabBase:"App_tabBase__3Ir4k"}},88:function(e,t,n){e.exports={hostPlace:"Status_hostPlace__3HjW4",statePlace:"Status_statePlace__3QdJu"}},89:function(e,t,n){e.exports={setupButton:"Contract_setupButton__24urr",generatePasswd:"Contract_generatePasswd__JAHeY"}}},[[288,1,2]]]);
//# sourceMappingURL=main.dc6d5d43.chunk.js.map